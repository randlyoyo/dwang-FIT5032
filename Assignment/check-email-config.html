<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EmailJS Configuration Check</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .card {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #333;
        margin-bottom: 10px;
      }
      .subtitle {
        color: #666;
        margin-bottom: 30px;
      }
      .check-item {
        padding: 15px;
        margin: 10px 0;
        border-radius: 8px;
        border-left: 4px solid #ddd;
      }
      .check-item.success {
        background: #d4edda;
        border-left-color: #28a745;
      }
      .check-item.error {
        background: #f8d7da;
        border-left-color: #dc3545;
      }
      .check-item.warning {
        background: #fff3cd;
        border-left-color: #ffc107;
      }
      .icon {
        font-weight: bold;
        margin-right: 10px;
      }
      .success .icon {
        color: #28a745;
      }
      .error .icon {
        color: #dc3545;
      }
      .warning .icon {
        color: #ffc107;
      }
      .config-value {
        font-family: 'Courier New', monospace;
        background: #f8f9fa;
        padding: 5px 10px;
        border-radius: 4px;
        margin: 5px 0;
        display: block;
      }
      button {
        background: #28a745;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 20px;
      }
      button:hover {
        background: #218838;
      }
      .instructions {
        margin-top: 30px;
        padding: 20px;
        background: #e7f3ff;
        border-radius: 8px;
        border-left: 4px solid #007bff;
      }
      .instructions h3 {
        margin-top: 0;
        color: #007bff;
      }
      .instructions ol {
        margin: 10px 0;
        padding-left: 20px;
      }
      .instructions li {
        margin: 8px 0;
      }
    </style>
  </head>
  <body>
    <div class="card">
      <h1>üìß EmailJS Configuration Checker</h1>
      <p class="subtitle">Check your EmailJS configuration to diagnose email sending issues</p>

      <div id="results"></div>

      <button onclick="checkConfiguration()">üîç Re-check Configuration</button>

      <div class="instructions">
        <h3>üìù How to Fix</h3>
        <ol>
          <li>
            <strong>Register at EmailJS:</strong>
            <a href="https://www.emailjs.com/" target="_blank">https://www.emailjs.com/</a>
          </li>
          <li><strong>Add Email Service:</strong> Connect your Gmail or other email provider</li>
          <li>
            <strong>Create Email Template:</strong> Use variables like {{to_email}}, {{message}}
          </li>
          <li>
            <strong>Get your credentials:</strong>
            <ul>
              <li>Service ID (e.g., service_abc123)</li>
              <li>Template ID (e.g., template_xyz789)</li>
              <li>Public Key (e.g., abcdefghijklmno)</li>
            </ul>
          </li>
          <li>
            <strong>Create .env.local file:</strong> in project root with:
            <pre
              style="
                background: #2d2d2d;
                color: #f8f8f2;
                padding: 10px;
                border-radius: 4px;
                margin-top: 5px;
              "
            >
VITE_EMAILJS_SERVICE_ID=your_service_id
VITE_EMAILJS_TEMPLATE_ID=your_template_id
VITE_EMAILJS_PUBLIC_KEY=your_public_key</pre
            >
          </li>
          <li><strong>Restart dev server:</strong> Stop and run <code>npm run dev</code> again</li>
        </ol>
        <p style="margin-top: 15px">
          üìñ <strong>Full guide:</strong> See <code>EMAILJS_SETUP_GUIDE.md</code> in project root
        </p>
      </div>
    </div>

    <script>
      function checkConfiguration() {
        const results = document.getElementById('results')
        results.innerHTML = ''

        const checks = []

        // Check 1: Environment variables
        const serviceId = import.meta.env.VITE_EMAILJS_SERVICE_ID
        const templateId = import.meta.env.VITE_EMAILJS_TEMPLATE_ID
        const publicKey = import.meta.env.VITE_EMAILJS_PUBLIC_KEY

        if (serviceId && serviceId !== 'your-service-id') {
          checks.push({
            status: 'success',
            message: 'Service ID is configured',
            value: serviceId,
          })
        } else {
          checks.push({
            status: 'error',
            message: 'Service ID is NOT configured',
            detail: 'Add VITE_EMAILJS_SERVICE_ID to .env.local',
          })
        }

        if (templateId && templateId !== 'your-template-id') {
          checks.push({
            status: 'success',
            message: 'Template ID is configured',
            value: templateId,
          })
        } else {
          checks.push({
            status: 'error',
            message: 'Template ID is NOT configured',
            detail: 'Add VITE_EMAILJS_TEMPLATE_ID to .env.local',
          })
        }

        if (publicKey && publicKey !== 'your-public-key') {
          checks.push({
            status: 'success',
            message: 'Public Key is configured',
            value: publicKey.substring(0, 8) + '...',
          })
        } else {
          checks.push({
            status: 'error',
            message: 'Public Key is NOT configured',
            detail: 'Add VITE_EMAILJS_PUBLIC_KEY to .env.local',
          })
        }

        // Check 2: Domain
        const domain = window.location.hostname
        checks.push({
          status: 'success',
          message: 'Current domain',
          value: domain,
          detail:
            'Make sure this domain is whitelisted in EmailJS Account ‚Üí Security ‚Üí Allowed Domains',
        })

        // Check 3: EmailJS library
        if (typeof window.emailjs !== 'undefined') {
          checks.push({
            status: 'success',
            message: 'EmailJS library loaded',
          })
        } else {
          checks.push({
            status: 'warning',
            message: 'EmailJS library check (may not be loaded on this page)',
          })
        }

        // Display results
        checks.forEach((check) => {
          const div = document.createElement('div')
          div.className = `check-item ${check.status}`

          const icon =
            check.status === 'success' ? '‚úì' : check.status === 'error' ? '‚úó' : '‚ö†'

          div.innerHTML = `
                    <span class="icon">${icon}</span>
                    <strong>${check.message}</strong>
                    ${check.value ? `<span class="config-value">${check.value}</span>` : ''}
                    ${check.detail ? `<div style="margin-top: 5px; font-size: 14px; color: #666;">${check.detail}</div>` : ''}
                `
          results.appendChild(div)
        })

        // Summary
        const errorCount = checks.filter((c) => c.status === 'error').length
        const summaryDiv = document.createElement('div')
        summaryDiv.className = `check-item ${errorCount === 0 ? 'success' : 'error'}`
        summaryDiv.style.marginTop = '20px'

        if (errorCount === 0) {
          summaryDiv.innerHTML = `
                    <span class="icon">üéâ</span>
                    <strong>Configuration looks good!</strong>
                    <div style="margin-top: 10px;">
                        If emails still don't work:
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Check your spam/junk folder</li>
                            <li>Verify EmailJS template is correct</li>
                            <li>Check EmailJS dashboard for error logs</li>
                            <li>Ensure Gmail is authorized (if using Gmail)</li>
                        </ul>
                    </div>
                `
        } else {
          summaryDiv.innerHTML = `
                    <span class="icon">‚ùå</span>
                    <strong>Found ${errorCount} configuration issue(s)</strong>
                    <div style="margin-top: 10px;">
                        Fix the errors above and restart the dev server.
                    </div>
                `
        }
        results.appendChild(summaryDiv)
      }

      // Run check on page load
      checkConfiguration()
    </script>
  </body>
</html>

