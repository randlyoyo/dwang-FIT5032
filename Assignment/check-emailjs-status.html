<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EmailJS é…ç½®çŠ¶æ€æ£€æŸ¥</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Segoe UI', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .container {
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        max-width: 800px;
        width: 100%;
        padding: 40px;
      }

      h1 {
        color: #333;
        margin-bottom: 10px;
        font-size: 2em;
      }

      .subtitle {
        color: #666;
        margin-bottom: 30px;
        font-size: 1.1em;
      }

      .status-card {
        border: 2px solid #e0e0e0;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
        transition: all 0.3s;
      }

      .status-card.success {
        border-color: #28a745;
        background: #f0fff4;
      }

      .status-card.error {
        border-color: #dc3545;
        background: #fff5f5;
      }

      .status-card.warning {
        border-color: #ffc107;
        background: #fffbf0;
      }

      .status-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 15px;
      }

      .status-icon {
        font-size: 2em;
      }

      .status-title {
        font-size: 1.3em;
        font-weight: bold;
      }

      .status-body {
        margin-left: 50px;
      }

      .config-value {
        background: #f8f9fa;
        padding: 10px 15px;
        border-radius: 8px;
        margin: 10px 0;
        font-family: 'Courier New', monospace;
        word-break: break-all;
      }

      .action-button {
        display: inline-block;
        background: #667eea;
        color: white;
        padding: 12px 25px;
        border-radius: 8px;
        text-decoration: none;
        margin-top: 15px;
        transition: all 0.3s;
        border: none;
        cursor: pointer;
        font-size: 1em;
      }

      .action-button:hover {
        background: #5568d3;
        transform: translateY(-2px);
      }

      .steps {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
      }

      .step {
        padding: 15px 0;
        border-bottom: 1px solid #e0e0e0;
      }

      .step:last-child {
        border-bottom: none;
      }

      .step-number {
        display: inline-block;
        background: #667eea;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        text-align: center;
        line-height: 30px;
        margin-right: 10px;
        font-weight: bold;
      }

      .error-message {
        background: #dc3545;
        color: white;
        padding: 15px;
        border-radius: 8px;
        margin-top: 10px;
      }

      .summary {
        text-align: center;
        padding: 20px;
        font-size: 1.2em;
        margin-top: 20px;
      }

      .summary.good {
        color: #28a745;
      }

      .summary.bad {
        color: #dc3545;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ“§ EmailJS é…ç½®çŠ¶æ€æ£€æŸ¥</h1>
      <p class="subtitle">æ£€æŸ¥ä½ çš„ EmailJS é…ç½®æ˜¯å¦å®Œæ•´</p>

      <div id="status-container">
        <!-- çŠ¶æ€å¡ç‰‡å°†ç”± JavaScript åŠ¨æ€ç”Ÿæˆ -->
      </div>

      <div id="summary" class="summary"></div>

      <div id="next-steps"></div>
    </div>

    <script>
            // è¯»å–ç¯å¢ƒå˜é‡ï¼ˆä» Viteï¼‰
            const config = {
              publicKey: import.meta.env.VITE_EMAILJS_PUBLIC_KEY,
              serviceId: import.meta.env.VITE_EMAILJS_SERVICE_ID,
              templateId: import.meta.env.VITE_EMAILJS_TEMPLATE_ID,
            }

            console.log('ğŸ“§ EmailJS Config:', config)

            function checkConfig() {
              const container = document.getElementById('status-container')
              const summaryDiv = document.getElementById('summary')
              const nextStepsDiv = document.getElementById('next-steps')

              let allGood = true
              let html = ''

              // æ£€æŸ¥ Public Key
              if (config.publicKey && config.publicKey !== 'your-public-key') {
                html += createStatusCard(
                  'success',
                  'âœ…',
                  'Public Key é…ç½®æ­£ç¡®',
                  `<div class="config-value">${config.publicKey}</div><p>âœ¨ å¤ªå¥½äº†ï¼Public Key å·²é…ç½®</p>`,
                )
              } else {
                allGood = false
                html += createStatusCard(
                  'error',
                  'âŒ',
                  'Public Key æœªé…ç½®',
                  `<div class="config-value">${config.publicKey || 'æœªè®¾ç½®'}</div>
                  <div class="error-message">ä½ çš„ Public Key æ˜¯: <strong>Imm-9hpIk6q8f6EDX</strong></div>
                  <p>è¯·åœ¨ .env.local æ–‡ä»¶ä¸­æ·»åŠ æ­¤é…ç½®</p>`,
                )
              }

              // æ£€æŸ¥ Service ID
              if (config.serviceId && config.serviceId !== 'your-service-id') {
                html += createStatusCard(
                  'success',
                  'âœ…',
                  'Service ID é…ç½®æ­£ç¡®',
                  `<div class="config-value">${config.serviceId}</div><p>âœ¨ Gmail æœåŠ¡å·²è¿æ¥</p>`,
                )
              } else {
                allGood = false
                html += createStatusCard(
                  'error',
                  'âŒ',
                  'Service ID æœªé…ç½®',
                  `<div class="config-value">${config.serviceId || 'æœªè®¾ç½®'}</div>
                  <div class="error-message">è¿™æ˜¯å¯¼è‡´ "insufficient authentication scopes" é”™è¯¯çš„ä¸»è¦åŸå› ï¼</div>
                  <p>ä½ éœ€è¦åœ¨ EmailJS ç½‘ç«™ä¸Šæ·»åŠ  Gmail æœåŠ¡å¹¶è·å– Service ID</p>
                  <a href="https://dashboard.emailjs.com/admin" target="_blank" class="action-button">
                    ğŸ”— å‰å¾€ EmailJS Dashboard
                  </a>`,
                )
              }

              // æ£€æŸ¥ Template ID
              if (config.templateId && config.templateId !== 'your-template-id') {
                html += createStatusCard(
                  'success',
                  'âœ…',
                  'Template ID é…ç½®æ­£ç¡®',
                  `<div class="config-value">${config.templateId}</div><p>âœ¨ é‚®ä»¶æ¨¡æ¿å·²è®¾ç½®</p>`,
                )
              } else {
                allGood = false
                html += createStatusCard(
                  'error',
                  'âŒ',
                  'Template ID æœªé…ç½®',
                  `<div class="config-value">${config.templateId || 'æœªè®¾ç½®'}</div>
                  <p>ä½ éœ€è¦åœ¨ EmailJS ç½‘ç«™ä¸Šåˆ›å»ºé‚®ä»¶æ¨¡æ¿å¹¶è·å– Template ID</p>`,
                )
              }

              container.innerHTML = html

              // æ˜¾ç¤ºæ€»ç»“
              if (allGood) {
                summaryDiv.className = 'summary good'
                summaryDiv.innerHTML = 'ğŸ‰ æ­å–œï¼æ‰€æœ‰é…ç½®éƒ½æ­£ç¡®ï¼Œé‚®ä»¶åŠŸèƒ½åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ï¼'
              } else {
                summaryDiv.className = 'summary bad'
                summaryDiv.innerHTML = 'âš ï¸ æœ‰é…ç½®é¡¹æœªå®Œæˆï¼Œè¯·æŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤å®Œæˆé…ç½®'

                // æ˜¾ç¤ºåç»­æ­¥éª¤
                nextStepsDiv.innerHTML = `
                  <div class="steps">
                    <h2 style="margin-bottom: 20px;">ğŸ“‹ å®Œæˆé…ç½®çš„æ­¥éª¤</h2>

                    <div class="step">
                      <span class="step-number">1</span>
                      <strong>è®¿é—® EmailJS Dashboard</strong><br>
                      <a href="https://dashboard.emailjs.com/admin" target="_blank" class="action-button" style="margin-top: 10px;">
                        å‰å¾€ EmailJS â†’
                      </a>
                    </div>

                    <div class="step">
                      <span class="step-number">2</span>
                      <strong>æ·»åŠ  Gmail æœåŠ¡</strong><br>
                      ç‚¹å‡» "Email Services" â†’ "Add New Service" â†’ é€‰æ‹© "Gmail" â†’ æˆæƒä½ çš„è´¦æˆ·
                    </div>

                    <div class="step">
                      <span class="step-number">3</span>
                      <strong>å¤åˆ¶ Service ID</strong><br>
                      åœ¨æœåŠ¡åˆ—è¡¨ä¸­æ‰¾åˆ°ä½ åˆšæ·»åŠ çš„ Gmail æœåŠ¡ï¼Œå¤åˆ¶ Service ID
                    </div>

                    <div class="step">
                      <span class="step-number">4</span>
                      <strong>åˆ›å»ºé‚®ä»¶æ¨¡æ¿</strong><br>
                      ç‚¹å‡» "Email Templates" â†’ "Create New Template" â†’ è®¾ç½®æ¨¡æ¿å†…å®¹ â†’ å¤åˆ¶ Template ID
                    </div>

                    <div class="step">
                      <span class="step-number">5</span>
                      <strong>æ›´æ–° .env.local æ–‡ä»¶</strong><br>
                      åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ .env.local æ–‡ä»¶ä¸­æ·»åŠ :<br>
                      <div class="config-value" style="margin-top: 10px;">
      VITE_EMAILJS_PUBLIC_KEY=Imm-9hpIk6q8f6EDX<br>
      VITE_EMAILJS_SERVICE_ID=ä½ çš„Service_ID<br>
      VITE_EMAILJS_TEMPLATE_ID=ä½ çš„Template_ID
                      </div>
                    </div>

                    <div class="step">
                      <span class="step-number">6</span>
                      <strong>é‡å¯å¼€å‘æœåŠ¡å™¨</strong><br>
                      åœ¨ç»ˆç«¯æŒ‰ Ctrl+Cï¼Œç„¶åè¿è¡Œ: <code>npm run dev</code>
                    </div>
                  </div>
                `
              }
            }

            function createStatusCard(type, icon, title, body) {
              return `
                <div class="status-card ${type}">
                  <div class="status-header">
                    <div class="status-icon">${icon}</div>
                    <div class="status-title">${title}</div>
                  </div>
                  <div class="status-body">${body}</div>
                </div>
              `
            }

            // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œæ£€æŸ¥
            checkConfig()
    </script>
  </body>
</html>

